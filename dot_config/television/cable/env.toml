[metadata]
name = "env"
description = "A channel to select from environment variables"

[source]
command = "printenv"
output = "{split:=:1..}" # output the value

[preview]
command = "echo '{split:=:1..}'"

[ui]
layout = "portrait"
preview_panel = { size = 20, header = "{split:=:0}" }

[keybindings]
shortcut = "f3"
enter = "actions:copy_value"
ctrl-y = "actions:copy_name"

[actions.copy_value]
description = "Copy the variable value to clipboard"
command = "printf '%s' '{split:=:1..}' | pbcopy 2>/dev/null || printf '%s' '{split:=:1..}' | xclip -selection clipboard"
mode = "fork"

[actions.copy_name]
description = "Copy the variable name to clipboard"
command = "printf '%s' '{split:=:0}' | pbcopy 2>/dev/null || printf '%s' '{split:=:0}' | xclip -selection clipboard"
mode = "fork"
[actions.name]
description = "Output the variable name instead of the value"
command = "echo '{split:=:0}'"
mode = "execute"
