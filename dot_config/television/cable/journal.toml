[metadata]
name = "journal"
description = "Browse systemd journal log identifiers and their logs"
requirements = ["journalctl"]

[source]
command = "journalctl --field SYSLOG_IDENTIFIER 2>/dev/null | sort -f"

[preview]
command = "journalctl -b --no-pager -o short-iso -n 50 SYSLOG_IDENTIFIER='{}' 2>/dev/null"

[ui]
layout = "portrait"
preview_panel = { size = 70 }

[actions.logs]
description = "Follow live logs for the selected identifier"
command = "journalctl -f SYSLOG_IDENTIFIER='{}'"
mode = "execute"

[actions.full]
description = "View all logs for the selected identifier in a pager"
command = "journalctl -b --no-pager -o short-iso SYSLOG_IDENTIFIER='{}' | less"
mode = "fork"
