#!/bin/bash

SOURCE_DIR=$(chezmoi source-path)

. "$SOURCE_DIR/scripts/utils_install" &&
    . "$SOURCE_DIR/scripts/utils"

print_in_purple "Update packages\n"
update

install_nnn_plugins

update_fish_plugins

print_in_purple "Update GO packages\n"

ask_for_confirmation "Do you want to update GO packages now? It could take a while."
if answer_is_yes; then
    install_go_package "github.com/cosmos72/gomacro" "gomacro"
    install_go_package "github.com/traefik/yaegi/cmd/yaegi" "yaegi"
    install_go_package "mvdan.cc/gofumpt" "gofumpt"
    install_go_package "gotest.tools/gotestsum" "gotestsum"
fi

print_in_purple "Update JS packages\n"
ask_for_confirmation "Do you want to update JS packages now? It could take a while."
if answer_is_yes; then
    install_npm_package "bash-language-server"
    install_npm_package "javascript-typescript-langserver"
    install_npm_package "typescript-language-server"
    install_npm_package "vscode-css-languageserver-bin"
    install_npm_package "vscode-html-languageserver-bin"
    install_yarn_package "@mermaid-js/mermaid-cli" "mermaid-cli"
fi

print_in_purple "Update Python packages\n"

install_pip_package "subliminal" "subliminal"

print_in_purple "Update SpaceVim\n"

update_spacevim_plugins

clean_up_cache
